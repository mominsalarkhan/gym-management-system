{% extends "base.html" %}
{% block content %}
  <div class="section">
    <div class="page-header">
      <h2>Calendar View</h2>
      <a href="{{ url_for('calendar.add_event') }}" class="add-btn">Add Event</a>
    </div>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<table class="table-container">
  <thead>
    <tr>
      <th>Event ID</th>
      <th>Title</th>
      <th>Description</th>
      <th>Start</th>
      <th>End</th>
      <th>Location</th>
      <th>Created By</th>
      <th>Type</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for event in events %}
    <tr>
      <td>{{ event.EventID }}</td>
      <td>{{ event.Title }}</td>
      <td>{{ event.Description }}</td>
      <td>{{ event.StartTime }}</td>
      <td>{{ event.EndTime }}</td>
      <td>{{ event.Location }}</td>
      <td>{{ event.CreatedBy }}</td>
      <td>{{ event.EventType }}</td>
      <td>
        <div class="table-actions">
        <form method="post" action="{{ url_for('calendar.delete_event_route', event_id=event.EventID) }}"
              onsubmit="return confirm('Delete this event?');">
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}