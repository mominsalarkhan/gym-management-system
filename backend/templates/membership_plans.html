{% extends "base.html" %}
{% block content %}
  <div class="section">
    <div class="page-header">
      <h2>Membership Plans</h2>
      <a href="{{ url_for('members.add_membership_plan') }}" class="add-btn">Add New Plan</a>
    </div>


  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <table class="table-container">
    <tr>
      <th>Plan ID</th>
      <th>Name</th>
      <th>Monthly Fee</th>
      <th>Access Level</th>
      <th>Actions</th>
    </tr>
    {% for plan in plans %}
    <tr>
      <td>{{ plan.PlanID }}</td>
      <td>{{ plan.PlanName }}</td>
      <td>${{ plan.MonthlyFee }}</td>
      <td>{{ plan.AccessLevel }}</td>
      <td>
        <div class="table-actions"> 
        <form method="POST" action="{{ url_for('members.delete_membership_plan', pid=plan.PlanID) }}" style="display:inline;" onsubmit="return confirm('Delete plan {{ plan.PlanName }}?');">
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
        </div>
      </td>
    </tr>
    {% endfor %}
  </table>
{% endblock %}