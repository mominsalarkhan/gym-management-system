{% extends "base.html" %}
{% block content %}
  <h2>Fitness Classes</h2>

  <a href="{{ url_for('classes.add_class') }}">+ Add New Class</a>

  <h3>All Classes</h3>
  <table border="1" cellpadding="5">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Description</th>
      <th>Capacity</th>
      <th>Room</th>
      <th>Trainer</th>
      <th>Actions</th>
    </tr>
    {% for cls in classes %}
    <tr>
      <td>{{ cls.ClassID }}</td>
      <td>{{ cls.ClassName }}</td>
      <td>{{ cls.ClassDescription }}</td>
      <td>{{ cls.Capacity }}</td>
      <td>{{ cls.RoomID }}</td>
      <td>{{ cls.TrainerID }}</td>
      <td>
        <a href="{{ url_for('classes.edit_class', cid=cls.ClassID) }}">Edit</a>
        <form method="post"
              action="{{ url_for('classes.delete_class', cid=cls.ClassID) }}"
              style="display:inline;"
              onsubmit="return confirm('Delete class {{ cls.ClassName }}?');">
          <button type="submit">×</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>

  <h3>Class Schedules</h3>
  <a href="{{ url_for('classes.add_schedule') }}">+ Add Class Schedule</a>
  <table border="1" cellpadding="5">
    <tr>
      <th>Schedule ID</th>
      <th>Class</th>
      <th>Date</th>
      <th>Start</th>
      <th>End</th>
      <th>Actions</th>
    </tr>
    {% for sched in schedules %}
    <tr>
      <td>{{ sched.ScheduleID }}</td>
      <td>{{ sched.ClassID }}</td>
      <td>{{ sched.ScheduleDate }}</td>
      <td>{{ sched.StartTime }}</td>
      <td>{{ sched.EndTime }}</td>
      <td>
        <a href="{{ url_for('classes.edit_schedule', sid=sched.ScheduleID) }}">Edit</a>
        <form method="post"
              action="{{ url_for('classes.delete_schedule', sid=sched.ScheduleID) }}"
              style="display:inline;"
              onsubmit="return confirm('Delete this schedule?');">
          <button type="submit">×</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>

  <h3>Attendance Records</h3>
  <a href="{{ url_for('classes.add_attendance') }}">+ Add Attendance Record</a>
  <table border="1" cellpadding="5">
    <tr>
      <th>Attendance ID</th>
      <th>Member</th>
      <th>Schedule</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
    {% for a in attendance %}
    <tr>
      <td>{{ a.AttendanceID }}</td>
      <td>{{ a.MemberID }}</td>
      <td>{{ a.ScheduleID }}</td>
      <td>{{ a.Status }}</td>
      <td>
        <a href="{{ url_for('classes.edit_attendance', aid=a.AttendanceID) }}">Edit</a>
        <form method="post"
              action="{{ url_for('classes.delete_attendance', aid=a.AttendanceID) }}"
              style="display:inline;"
              onsubmit="return confirm('Delete this attendance record?');">
          <button type="submit">×</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
{% endblock %}