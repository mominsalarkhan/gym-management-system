{% extends "base.html" %}
{% block content %}
  <!-- Classes Section -->
  <div class="section">
    <div class="page-header">
      <h2>Fitness Classes</h2>
      <a href="{{ url_for('classes.add_class') }}" class="add-btn">Add New Class</a>
    </div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Capacity</th>
            <th>Room</th>
            <th>Trainer</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for cls in classes %}
          <tr>
            <td>{{ cls.ClassID }}</td>
            <td>{{ cls.ClassName }}</td>
            <td>{{ cls.ClassDescription }}</td>
            <td>{{ cls.Capacity }}</td>
            <td>{{ cls.RoomID }}</td>
            <td>{{ cls.TrainerID }}</td>
            <td>
              <div class="table-actions">
                <a href="{{ url_for('classes.edit_class', cid=cls.ClassID) }}" class="btn btn-secondary btn-sm">Edit</a>
                <form method="post"
                      action="{{ url_for('classes.delete_class', cid=cls.ClassID) }}"
                      onsubmit="return confirm('Delete class {{ cls.ClassName }}?');">
                  <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Class Schedules Section -->
  <div class="section">
    <div class="page-header">
      <h3>Class Schedules</h3>
      <a href="{{ url_for('classes.add_schedule') }}" class="add-btn">Add Class Schedule</a>
    </div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Schedule ID</th>
            <th>Class</th>
            <th>Date</th>
            <th>Start</th>
            <th>End</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for sched in schedules %}
          <tr>
            <td>{{ sched.ScheduleID }}</td>
            <td>{{ sched.ClassID }}</td>
            <td>{{ sched.ScheduleDate }}</td>
            <td>{{ sched.StartTime }}</td>
            <td>{{ sched.EndTime }}</td>
            <td>
              <div class="table-actions">
                <a href="{{ url_for('classes.edit_schedule', sid=sched.ScheduleID) }}" class="btn btn-secondary btn-sm">Edit</a>
                <form method="post"
                      action="{{ url_for('classes.delete_schedule', sid=sched.ScheduleID) }}"
                      onsubmit="return confirm('Delete this schedule?');">
                  <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Attendance Records Section -->
  <div class="section">
    <div class="page-header">
      <h3>Attendance Records</h3>
      <a href="{{ url_for('classes.add_attendance') }}" class="add-btn">Add Attendance Record</a>
    </div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Attendance ID</th>
            <th>Member</th>
            <th>Schedule</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for a in attendance %}
          <tr>
            <td>{{ a.AttendanceID }}</td>
            <td>{{ a.MemberID }}</td>
            <td>{{ a.ScheduleID }}</td>
            <td>{{ a.Status }}</td>
            <td>
              <div class="table-actions">
                <a href="{{ url_for('classes.edit_attendance', aid=a.AttendanceID) }}" class="btn btn-secondary btn-sm">Edit</a>
                <form method="post"
                      action="{{ url_for('classes.delete_attendance', aid=a.AttendanceID) }}"
                      onsubmit="return confirm('Delete this attendance record?');">
                  <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}