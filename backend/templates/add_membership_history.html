{% extends "base.html" %}
{% block content %}
  <h2>Add Membership History</h2>
  <form method="post">

    <label>Member:</label><br>
    <select name="MemberID" required>
      <option value="">Select a member</option>
      {% for m in members %}
        <option value="{{ m.MemberID }}"
          {% if request.form.get('MemberID') and request.form.get('MemberID')|int == m.MemberID %}
            selected
          {% elif member and m.MemberID == member.MemberID %}
            selected
          {% endif %}>
          {{ m.FirstName }} {{ m.LastName }}
        </option>
      {% endfor %}
    </select><br><br>

    <label>Plan:</label><br>
    <select name="plan_id" required>
      {% for plan in plans %}
        <option value="{{ plan.PlanID }}">{{ plan.PlanName }} - ${{ plan.MonthlyFee }}</option>
      {% endfor %}
    </select><br><br>

    <label>Start Date:</label><br>
    <input type="date" name="start_date" required><br><br>

    <label>End Date (optional):</label><br>
    <input type="date" name="end_date"><br><br>

    <button type="submit">Add History</button>

    {% if member %}
      <a href="{{ url_for('members.view_membership_history', mid=member.MemberID) }}">Cancel</a>
    {% else %}
      <a href="{{ url_for('members.list_members') }}">Cancel</a>
    {% endif %}
    
  </form>
{% endblock %}